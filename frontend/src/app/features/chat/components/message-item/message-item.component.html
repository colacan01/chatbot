<div class="message-item" [ngClass]="{
  'user-message': isUser,
  'assistant-message': isAssistant,
  'streaming': isStreaming
}">
  <div class="message-wrapper">
    <div class="message-avatar" *ngIf="isAssistant">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
      </svg>
    </div>

    <div class="message-content-wrapper">
      <div class="message-bubble">
        <div class="message-content" [innerHTML]="formattedContent"></div>
        <span class="streaming-cursor" *ngIf="isStreaming">▊</span>
      </div>

      <div class="message-meta">
        <span class="message-time">{{ timeAgo }}</span>
        <span class="streaming-indicator" *ngIf="isStreaming">
          · 생성 중...
        </span>
        <span class="message-category" *ngIf="message.category && isAssistant && !isStreaming">
          · {{ message.category }}
        </span>
        <span class="processing-time" *ngIf="message.processingTimeMs && isAssistant">
          · {{ (message.processingTimeMs / 1000).toFixed(1) }}초
        </span>
      </div>
    </div>

    <div class="message-avatar" *ngIf="isUser">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
    </div>
  </div>
</div>
